{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ryana\\\\csc307\\\\CSC307-Receipt-App\\\\packages\\\\frontend\\\\src\\\\ImageCapture.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport axios from 'axios';\nimport './CSS Files/ImageCapture.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImageCapture = () => {\n  _s();\n  const [image, setImage] = useState(null);\n  const [isWebcamActive, setIsWebcamActive] = useState(false);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const captureImage = () => {\n    const context = canvasRef.current.getContext('2d');\n    canvasRef.current.width = videoRef.current.videoWidth;\n    canvasRef.current.height = videoRef.current.videoHeight;\n    context.drawImage(videoRef.current, 0, 0, videoRef.current.videoWidth, videoRef.current.videoHeight);\n    const imageDataUrl = canvasRef.current.toDataURL('image/png');\n    setImage(imageDataUrl);\n    setIsWebcamActive(false);\n  };\n  const apture = async () => {\n    const formData = new FormData();\n    formData.append('image', image);\n    try {\n      await axios.post('http://localhost:8000/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      const userConfirmed = window.confirm('Image captured and uploaded successfully. Do you want to process this data?');\n      if (userConfirmed) {\n        fetch(`http://localhost:8000/process`).then(response => {\n          if (!response.ok) {\n            throw new Error(`HTTP error! Status: ${response.status}`);\n          }\n          return response.json();\n        }).then(data => {\n          console.log('Image data processed and saved to main.json');\n        }).catch(error => {\n          console.error('Error calling /process:', error.message);\n        });\n      }\n    } catch (error) {\n      console.error('Error uploading image:', error);\n    }\n  };\n  const startVideo = () => {\n    navigator.mediaDevices.getUserMedia({\n      video: true\n    }).then(stream => {\n      videoRef.current.srcObject = stream;\n      setIsWebcamActive(true);\n    }).catch(err => {\n      console.error('Error accessing webcam:', err);\n      setIsWebcamActive(false);\n    });\n  };\n  const retakeImage = () => {\n    setImage(null);\n    startVideo();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"file-upload-container\",\n    children: [!image && /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      autoPlay: true,\n      playsInline: true,\n      width: \"640\",\n      height: \"480\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 24\n    }, this), isWebcamActive && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"button\",\n      onClick: captureImage,\n      children: \"Capture\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 32\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: \"640\",\n      height: \"480\",\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), image && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: image,\n        alt: \"Captured\",\n        width: \"640\",\n        height: \"480\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        onClick: retakeImage,\n        children: \"Retake\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        onClick: uploadImage,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }, this), !isWebcamActive && !image && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"button\",\n      onClick: startVideo,\n      children: \"Start Webcam\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 43\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, this);\n};\n_s(ImageCapture, \"UeinN5ubuz5sHlPRdaWnpHZBgxM=\");\n_c = ImageCapture;\nexport default ImageCapture;\nvar _c;\n$RefreshReg$(_c, \"ImageCapture\");","map":{"version":3,"names":["React","useRef","useState","axios","jsxDEV","_jsxDEV","ImageCapture","_s","image","setImage","isWebcamActive","setIsWebcamActive","videoRef","canvasRef","captureImage","context","current","getContext","width","videoWidth","height","videoHeight","drawImage","imageDataUrl","toDataURL","apture","formData","FormData","append","post","headers","userConfirmed","window","confirm","fetch","then","response","ok","Error","status","json","data","console","log","catch","error","message","startVideo","navigator","mediaDevices","getUserMedia","video","stream","srcObject","err","retakeImage","className","children","ref","autoPlay","playsInline","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","display","src","alt","uploadImage","_c","$RefreshReg$"],"sources":["C:/Users/ryana/csc307/CSC307-Receipt-App/packages/frontend/src/ImageCapture.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport axios from 'axios';\r\nimport './CSS Files/ImageCapture.css';\r\n\r\n\r\nconst ImageCapture = () => {\r\n    const [image, setImage] = useState(null);\r\n    const [isWebcamActive, setIsWebcamActive] = useState(false);\r\n    const videoRef = useRef(null);\r\n    const canvasRef = useRef(null);\r\n\r\n\r\n    const captureImage = () => {\r\n        const context = canvasRef.current.getContext('2d');\r\n        canvasRef.current.width = videoRef.current.videoWidth;\r\n        canvasRef.current.height = videoRef.current.videoHeight;\r\n        context.drawImage(videoRef.current, 0, 0, videoRef.current.videoWidth, videoRef.current.videoHeight);\r\n        const imageDataUrl = canvasRef.current.toDataURL('image/png');\r\n        setImage(imageDataUrl);\r\n        setIsWebcamActive(false);\r\n    };\r\n\r\n\r\n    const apture = async () => {\r\n        const formData = new FormData();\r\n        formData.append('image', image);\r\n\r\n\r\n        try {\r\n            await axios.post('http://localhost:8000/upload', formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                },\r\n            });\r\n\r\n\r\n            const userConfirmed = window.confirm('Image captured and uploaded successfully. Do you want to process this data?');\r\n\r\n\r\n            if (userConfirmed) {\r\n                fetch(`http://localhost:8000/process`)\r\n                    .then(response => {\r\n                        if (!response.ok) {\r\n                            throw new Error(`HTTP error! Status: ${response.status}`);\r\n                        }\r\n                        return response.json();\r\n                    })\r\n                    .then(data => {\r\n                        console.log('Image data processed and saved to main.json');\r\n                    })\r\n                    .catch(error => {\r\n                        console.error('Error calling /process:', error.message);\r\n                    });\r\n            }\r\n        } catch (error) {\r\n            console.error('Error uploading image:', error);\r\n        }\r\n    };\r\n\r\n\r\n    const startVideo = () => {\r\n        navigator.mediaDevices.getUserMedia({ video: true })\r\n            .then(stream => {\r\n                videoRef.current.srcObject = stream;\r\n                setIsWebcamActive(true);\r\n            })\r\n            .catch(err => {\r\n                console.error('Error accessing webcam:', err);\r\n                setIsWebcamActive(false);\r\n            });\r\n    };\r\n\r\n\r\n    const retakeImage = () => {\r\n        setImage(null);\r\n        startVideo();\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"file-upload-container\">\r\n            {!image && <video ref={videoRef} autoPlay playsInline width=\"640\" height=\"480\" />}\r\n            {isWebcamActive && <button className=\"button\" onClick={captureImage}>Capture</button>}\r\n            <canvas ref={canvasRef} width=\"640\" height=\"480\" style={{ display: 'none' }}></canvas>\r\n            {image && (\r\n                <div>\r\n                    <img src={image} alt=\"Captured\" width=\"640\" height=\"480\" />\r\n                    <button className=\"button\" onClick={retakeImage}>Retake</button>\r\n                    <button className=\"button\" onClick={uploadImage}>Upload</button>\r\n                </div>\r\n            )}\r\n            {!isWebcamActive && !image && <button className=\"button\" onClick={startVideo}>Start Webcam</button>}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nexport default ImageCapture;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}